base-chart:
  nameOverride: mastodon
  fullnameOverride: ""

  serviceAccount:
    # Specifies whether a service account should be created
    create: true
    # Annotations to add to the service account
    annotations: {}
    # The name of the service account to use.
    # If not set and create is true, a name is generated using the fullname template
    name:

  service:
    type: ClusterIP
    ports: 
      - port: 80
        targetPort: 80
        name: p80-tcp
        protocol: TCP
      - port: 443
        targetPort: 443
        name: p443-tcp
        protocol: TCP

  ingresses: []

  statefulset:
    podManagementPolicy: OrderedReady
    replicas: 1
    revisionHistoryLimit: 10
    updateStrategy:
      rollingUpdate:
        partition: 0
      type: RollingUpdate
    volumes:
      - name: appdata
        nfs: 
          server: 192.168.1.10
          path: /appdata
    sharedEnv: 
      - name: GUID
        value: "1000"
      - name: PUID
        value: "1000"
      - name: TZ
        value: Etc/UTC
    sharedValues:
      imagePullPolicy: IfNotPresent
      securityContext: {}
      resources: {}
    spec:
      imagePullSecrets: []
      nodeSelector: {}
      tolerations: []
      affinity: {}
    containers: 
      - name: mastodon
        image: lscr.io/linuxserver/mastodon:latest
        env: 
          - name: LOCAL_DOMAIN
            value: example.com
          - name: REDIS_HOST
            value: redis
          - name: REDIS_PORT
            value: 6379
          - name: DB_HOST
            value: db
          - name: DB_USER
            value: mastodon
          - name: DB_NAME
            value: mastodon
          - name: DB_PASS
            value: mastodon
          - name: DB_PORT
            value: 5432
          - name: ES_ENABLED
            value: false
          - name: SECRET_KEY_BASE
            value: 
          - name: OTP_SECRET
            value: 
          - name: VAPID_PRIVATE_KEY
            value: 
          - name: VAPID_PUBLIC_KEY
            value: 
          - name: SMTP_SERVER
            value: mail.example.com
          - name: SMTP_PORT
            value: 25
          - name: SMTP_LOGIN
            value: 
          - name: SMTP_PASSWORD
            value: 
          - name: SMTP_FROM_ADDRESS
            value: notifications@example.com
          - name: S3_ENABLED
            value: false
        ports: 
          - containerPort: 80
            name: p80-tcp
            protocol: TCP
          - containerPort: 443
            name: p443-tcp
            protocol: TCP
        volumeMounts: []
    volumeClaimTemplates: 
      - volumeClaimTemplate:
          metadata:
            name: pvc-config
          spec:
            storageClassName: ceph-block
            accessModes: 
              - ReadWriteOnce
            resources:
              requests:
                storage: 20Gi
        volumeMount:
          mountPath: /config

  static_volumes: []